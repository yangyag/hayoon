# AGENTS.md

## 목적
- 이 저장소의 작업을 멀티 에이전트 방식으로 운영하기 위한 공통 규칙 문서다.
- 에이전트가 바뀌어도 동일한 품질/속도로 이어서 작업할 수 있게 한다.

## 프로젝트 컨텍스트
- 프로젝트: 40개월 아동 대상 한글 학습 웹앱 (`하윤이 환영해~` 시작 화면 포함)
- 백엔드: Spring Boot 3.5.11
- 자바 기준: Java 25 LTS (toolchain)
- 프론트엔드: React + Vite
- 저장 방식: localStorage
- 배포: Docker 이미지 기반
- 테스트 정책: 백엔드(Spring Boot) API 호출 테스트만 JUnit(`MockMvc`)으로 작성
- 메인 계획서: `WORK_PLAN.md`
- 화면/콘텐츠 계획: `docs/SCREEN_FLOW_AND_CONTENT_PLAN.md`
- 이미지 파일 레지스트리: `docs/ASSET_FILE_REGISTRY.md`

## 멀티 에이전트 구성
- `A0-Orchestrator` (총괄/통합)
- `A1-Backend` (Spring API, 모델, 예외, 테스트)
- `A2-Frontend` (화면/상태관리/TTS/UI)
- `A3-ContentAsset` (단어셋/파일경로/placeholder 정책)
- `A4-DevOps` (Gradle 통합 빌드, Dockerfile, compose)
- `A5-QA` (테스트 시나리오, 회귀 점검, DoD 검증)

## 역할별 책임
### A0-Orchestrator
- 작업 분해, 우선순위 결정, 병렬 가능 작업 지정
- 충돌 조정(백엔드 API 변경 vs 프론트 계약)
- `WORK_PLAN.md` 진행 상태 업데이트

### A1-Backend
- `/api/v1/cards`, `/api/v1/health` 구현/유지
- 입력 검증, 에러 포맷, API 테스트 유지
- 프론트 계약 변경 시 DTO/샘플 응답 문서 갱신

### A2-Frontend
- 화면 흐름: 환영 -> 책장 -> 가나다 한글 -> 글자선택 -> 학습
- 랜덤 단어 노출/글자 강조/localStorage/TTS 구현
- 아동용 UI 규칙(큰 글자/큰 버튼/단순 흐름) 준수

### A3-ContentAsset
- 글자별 5개 단어 세트 품질 관리
- 이미지 파일명/경로 규칙 유지
- 누락 자산 리포트 생성

### A4-DevOps
- 프론트-백 통합 빌드 파이프라인 구축
- Docker 멀티스테이지 빌드 및 실행 검증
- 실행 명령/환경 변수 문서화

### A5-QA
- 백엔드 API 체크리스트 기반 검증
- 회귀 테스트 결과 기록
- 릴리스 직전 수용 기준 충족 여부 판정
- 백엔드 API JUnit(`MockMvc`) 테스트 기준을 유지

## 표준 작업 흐름
1. A0가 작업 단위를 `작고 독립적`으로 분해한다.
2. A1/A2/A3/A4가 병렬 작업 가능한 단위를 동시에 진행한다.
3. A5가 통합 검증을 수행한다.
4. A0가 결과를 정리하고 계획서/로그를 갱신한다.

## 병렬 작업 규칙
- 서로 다른 파일 세트에서 먼저 병렬 작업한다.
- 공용 계약(API 스키마, 파일 경로 규칙)은 먼저 고정하고 구현한다.
- 충돌 가능 파일(`WORK_PLAN.md`, 공용 타입, 빌드 스크립트)은 A0 승인 후 병합한다.
- 한 작업은 한 책임만 가진다(기능 + 문서 + 테스트를 한 세트로 제출).

## 인수인계(Handoff) 템플릿
- `Task`: 무엇을 끝냈는지 1~2줄
- `Files`: 수정 파일 목록
- `Behavior`: 사용자 관점 동작 변화
- `Tests`: 수행한 테스트와 결과
- `Open`: 남은 이슈/리스크

예시:
- Task: 환영 화면과 시작 버튼 구현
- Files: `frontend/src/pages/WelcomePage.tsx`, `frontend/src/App.tsx`
- Behavior: 첫 진입 시 `하윤이 환영해~` 문구와 `시작하기` 버튼 노출
- Tests: 단위 테스트 3건 통과
- Open: 배경 애니메이션 강도 조정 필요

## 현재 우선순위 (고정)
1. 화면 플로우 MVP 완성 (환영/책장/가나다책/글자학습)
2. 단어/이미지 랜덤 노출 + 파일 매핑 안정화
3. 통합 빌드(`./gradlew clean build`) 성공
4. Docker 이미지 빌드/실행 성공

## 품질 게이트 (모든 에이전트 공통)
- 코드 + 테스트 + 문서가 함께 갱신되어야 완료로 인정한다.
- 하드코딩된 임시값은 TODO 태그와 함께 근거를 남긴다.
- 사용자에게 보이는 텍스트/경로/버튼명은 계획서와 일치해야 한다.
- 기능 추가 시 `WORK_PLAN.md` 진행 로그 1줄 이상 갱신한다.
- 테스트 추가 시 백엔드 API 호출 테스트(JUnit/MockMvc) 범위를 벗어나지 않는다.

## 금지/주의 사항
- 사용자 미승인 범위(로그인, 서버 DB 저장, 다중 프로필)를 임의로 확장하지 않는다.
- 자산 파일명 규칙을 임의 변경하지 않는다.
- 호환성 영향이 큰 변경(버전/빌드/런타임)은 A0 승인 후 진행한다.
